/*
 * Formstone v0.0.1 - 2014-11-07
 * Library of modular javascript components.
 * http://formstone.it/
 *
 * Copyright 2014 Ben Plum; MIT Licensed
 */

var Formstone=this.Formstone=function(a,b,c){"use strict";function d(a,b,c,d){var e,f={};d=d||{};for(e in d)d.hasOwnProperty(e)&&(f[d[e]]="classes"===a?b+"-"+d[e]:d[e]+"."+b);for(e in c)c.hasOwnProperty(e)&&(f[e]=c[e].replace(/{ns}/g,b));return f}function e(){var a={transition:"transitionend",MozTransition:"transitionend",OTransition:"otransitionend",WebkitTransition:"webkitTransitionEnd"},b="transitionend",d=c.createElement("div");for(var e in a)a.hasOwnProperty(e)&&e in d.style&&(b=a[e],g.transitionSupport=!0);return b+".{ns}"}var f=function(){this.Plugins={},this.$window=a(b),this.$document=a(c),this.$body=null,this.userAgent=b.navigator.userAgent||b.navigator.vendor||b.opera,this.isFirefox=/Firefox/i.test(this.userAgent),this.isChrome=/Chrome/i.test(this.userAgent),this.isSafari=/Safari/i.test(this.userAgent)&&!this.isChrome,this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(this.userAgent),this.isFirefoxMobile=this.isFirefox&&this.isMobile,this.transitionSupport=!1,this.matchMediaSupport=!!b.matchMedia,this.historySupport=!!(b.history&&b.history.pushState&&b.history.replaceState),this.rafSupport=!(!b.requestAnimationFrame||!b.cancelAnimationFrame)},g=new f,h={base:"{ns}",element:"{ns}-element"},i={namespace:".{ns}",click:"click.{ns}",dragEnter:"dragenter.{ns}",dragOver:"dragover.{ns}",dragLeave:"dragleave.{ns}",drop:"drop.{ns}",fileError:"fileError.{ns}",fileStart:"fileStart.{ns}",fileProgress:"fileProgress.{ns}",fileComplete:"fileComplete.{ns}",beforeUnload:"beforeunload.{ns}",complete:"complete.{ns}",start:"start.{ns}",change:"change.{ns}",keyDown:"keydown.{ns}",keyUp:"keyup.{ns}",keyPress:"keypress.{ns}",resize:"resize.{ns}",load:"load.{ns}",matchMedia:"matchmedia.{ns}",mouseEnter:"mouseenter.{ns}",mouseLeave:"mouseleave.{ns}",mouseOver:"mouseover.{ns}",mouseOut:"mouseout.{ns}",mouseMove:"mousemove.{ns}",touchStart:"touchstart.{ns}",touchMove:"touchmove.{ns}",touchEnd:"touchend.{ns}"};return f.prototype.Plugin=function(c,e){return g.Plugins[c]=function(c,e){function f(d){e.initialized||(e.initialized=!0,e.namespace=c,e.methods._setup.call(b)),d=a.extend(!0,{},e.defaults,d);for(var f=this,g=0,h=f.length;h>g;g++){var i=f.eq(g);if(!j(i)){var k=a.extend(!0,{$element:i,$el:i},d,i.data(c+"-options"));e.methods._construct.call(i,k),i.addClass(e.classes.element).data(c,k)}}return f}function g(a){"undefined"!=typeof a&&(a.preventDefault(),a.stopPropagation())}function j(a){return a.data(c)}function k(a,b,c){return l(a),setTimeout(c,b)}function l(a){a&&(clearTimeout(a),a=null)}function m(a){return"."+a}function n(a){for(var b=this,c=0,d=b.length;d>c;c++){var e=b.eq(c),f=j(e);f&&a.apply(e,[f].concat(Array.prototype.slice.call(arguments,1)))}return b}function o(a){return e.methods[a]&&0!==a.indexOf("_")?n.apply(this,[e.methods[a]].concat(Array.prototype.slice.call(arguments,1))):"object"!=typeof a&&a?this:f.apply(this,arguments)}function p(b){return"defaults"===b&&(e.defaults=a.extend(!0,e.defaults,arguments[1]||{})),this}return e.initialized=!1,e.classes=d("classes",c,h,e.classes),e.events=d("events",c,i,e.events),e.functions=a.extend({getData:j,startTimer:k,clearTimer:l,getClassName:m,killEvent:g},e.functions),e.methods=a.extend({_setup:a.noop,_construct:a.noop,_destruct:a.noop,_delegate:!1,destroy:function(){n.apply(this,[e.methods._destruct].concat(Array.prototype.slice.call(arguments,1))),this.removeClass(e.classes.element).removeData(c)}},e.methods),e.widget?(a.fn[c]=o,a[c]=p):a[c]=e.methods._delegate||o,e}(c,e),g.Plugins[c]},g.$document.ready(function(){g.$body=a("body")}),i.transitionEnd=e(),i.clickTouchStart=i.click+" "+i.touchStart,g}(jQuery,this,document);