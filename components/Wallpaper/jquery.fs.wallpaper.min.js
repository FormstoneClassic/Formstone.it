/* 
 * Wallpaper v3.0.3 - 2014-01-29 
 * A jQuery plugin for smooth-scaling image and video backgrounds. Part of the Formstone Library. 
 * http://formstone.it/wallpaper/ 
 * 
 * Copyright 2014 Ben Plum; MIT Licensed 
 */ 

!function(a,b){"use strict";function c(b){for(var c=a.extend({},n,b),e=a(this),f=0,g=e.length;g>f;f++)d.apply(e.eq(f),[a.extend({},c)]);return l.hasClass("wallpaper-inititalized")||(l.addClass("wallpaper-inititalized"),k.on("resize.wallpaper",c,i)),e}function d(b){var c=a(this);if(!c.hasClass("wallpaper")){a.extend(b,c.data("wallpaper-options")),c.addClass("wallpaper loading").append('<div class="wallpaper-container"></div>'),b.isAnimating=!1,b.$target=c,b.$container=b.$target.find(".wallpaper-container"),b.$target.data("wallpaper",b).on("resize.wallpaper",b,h);var d=b.source;b.source=null,e(d,b),b.onReady.call()}}function e(a,b){b.isAnimating||(b.source!==a?(b.$target.addClass("loading"),b.source=a,b.isAnimating=!0,"object"==typeof a?g(a,b):f(a,b)):b.$target.trigger("wallpaper.loaded"))}function f(b,c){var d=a('<div class="wallpaper-media wallpaper-image"><img /></div>'),e=d.find("img");e.one("load.wallpaper",function(){m&&d.addClass("native").css({backgroundImage:"url("+c.source+")"}),c.$container.find(".wallpaper-media").length<1?(d.appendTo(c.$container).animate({opacity:1},c.speed),c.isAnimating=!1,c.$target.trigger("wallpaper.loaded")):d.appendTo(c.$container).animate({opacity:1},c.speed,function(){c.$container.find(".wallpaper-image").not(":last").remove(),c.isAnimating=!1,c.$target.trigger("wallpaper.loaded")}),c.$target.removeClass("loading"),h({data:c}),c.onLoad.call()}).attr("src",c.source),(e[0].complete||4===e[0].readyState)&&e.trigger("load")}function g(b,c){var d=a('<div class="wallpaper-media wallpaper-video"></div>'),e="<video";c.loop&&(e+=" loop"),e+=">",c.source.webm&&(e+='<source src="'+c.source.webm+'" type="video/webm" />'),c.source.mp4&&(e+='<source src="'+c.source.mp4+'" type="video/mp4" />'),c.source.ogg&&(e+='<source src="'+c.source.ogg+'" type="video/ogg" />'),e+="</video>",d.append(e).find("video").one("loadedmetadata",function(){c.$container.find(".wallpaper-media").length<1?(d.appendTo(c.$container).animate({opacity:1},c.speed),c.isAnimating=!1,c.$target.trigger("wallpaper.loaded"),c.hoverPlay?c.$target.on("mouseover.boxer",o.play).on("mouseout.boxer",o.stop):c.autoPlay&&this.play()):d.appendTo(c.$container).animate({opacity:1},c.speed,function(){c.$container.find(".wallpaper-image").not(":last").remove(),c.isAnimating=!1,c.$target.trigger("wallpaper.loaded")}),c.$target.removeClass("loading").trigger("wallpaper.loaded"),h({data:c}),c.onLoad.call()})}function h(a){a.preventDefault&&(a.preventDefault(),a.stopPropagation());for(var b=a.data,c=b.$container.find(".wallpaper-media"),d=0,e=c.length;e>d;d++){var f=c.eq(d),g=f.find("video").length?"video":"image",h=f.find(g);if(h.length&&("image"!==g||!b.nativeSupport)){var i=b.$target.outerWidth(),k=b.$target.outerHeight(),l=j(h);b.width=l.naturalWidth,b.height=l.naturalHeight,b.left=0,b.top=0;var m=b.width/b.height;b.height=k,b.width=b.height*m,b.width<i&&(b.width=i,b.height=b.width/m),b.left=-(b.width-i)/2,b.top=-(b.height-k)/2,f.css({height:b.height,width:b.width,left:b.left,top:b.top})}}}function i(){a(".wallpaper").each(function(){var b=a(this).data("wallpaper");h({data:b})})}function j(a){if(a.is("img")){var b=a[0];if("undefined"!=typeof b.naturalHeight)return{naturalHeight:b.naturalHeight,naturalWidth:b.naturalWidth};var c=new Image;return c.src=b.src,{naturalHeight:c.height,naturalWidth:c.width}}return{naturalHeight:a[0].videoHeight,naturalWidth:a[0].videoWidth}}var k=a(b),l=a("body"),m="backgroundSize"in document.documentElement.style,n={autoPlay:!0,hoverPlay:!1,loop:!0,onLoad:a.noop,onReady:a.noop,source:null,speed:500},o={defaults:function(b){return n=a.extend(n,b||{}),a(this)},destroy:function(){var b=a(this).each(function(){var b=a(this).data("wallpaper");b.$target.removeClass("wallpaper").off(".boxer"),b.$container.remove()});return a(".wallpaper").length<1&&(l.removeClass("wallpaper-inititalized"),k.off(".wallpaper")),b},load:function(b){return a(this).each(function(){var c=a(this).data("wallpaper");null!==c&&e(b,c)})},play:function(){return a(this).each(function(){var b=a(this).data("wallpaper");if(null!==b){var c=b.$container.find("video");c.length&&c[0].play()}})},stop:function(){return a(this).each(function(){var b=a(this).data("wallpaper");if(null!==b){var c=b.$container.find("video");c.length&&c[0].pause()}})}};a.fn.wallpaper=function(a){return o[a]?o[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?this:c.apply(this,arguments)},a.wallpaper=function(a){"defaults"===a&&o.defaults.apply(this,Array.prototype.slice.call(arguments,1))}}(jQuery,window);