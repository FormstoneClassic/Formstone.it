/*
 * Sizer Plugin [Formstone Library]
 * @author Ben Plum
 * @version 0.1.6
 *
 * Copyright (c) 2013 Ben Plum <mr@benplum.com>
 * Released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
 */
 
if(jQuery)(function(b){function k(a){a=b.extend({},f,a);for(var d=b(this),c=0,e=d.length;c<e;c++)l(d.eq(c),a);b("#sizer-style").length||b("body").append('<style id="sizer-style">.sizer-size:after { clear: both; content: "."; display: block; height: 0; line-height: 0; visibility: hidden; }</style>');return d}function l(a,d){var c=b.extend({},{$sizer:a,$items:a.find(".sizer-item"),updateParent:a.hasClass("sizer-update")||0<a.find(".sizer-update").length,diabled:!1,guid:m++},d);c.$items.wrapInner('<div class="sizer-size" />'); c.$sizer.addClass("sizer-ready").data("sizer",c).on("resize.sizer",c,g).trigger("resize.sizer");c.$sizer.find("img").each(function(){var a=b(this);if(a[0].complete)b(this).trigger("resize.sizer");else a.on("load",function(){b(this).trigger("resize.sizer")})})}function g(a){a=a.data;if(a.minWidth<Site.maxWidth){for(var b=0,c=0;c<a.$items.length;c++){var e=a.$items.eq(c).find(".sizer-size").outerHeight(!0);e>b&&(b=e)}a.$items.css({height:b});a.updateParent&&a.$sizer.css({height:b}).find(".sizer-update").css({height:b})}else a.$items.css({height:""}), a.$sizer.css({height:""})}var m=0,f={minWidth:0},h={defaults:function(a){f=b.extend(f,a||{});return b(this)},disable:function(){b(this).each(function(){var a=b(this).data("sizer");a.disabled=!0;a.$sizer.off("resize.sizer");a.$items.css({height:""});a.updateParent&&a.$sizer.css({height:""}).find(".sizer-update").css({height:""})})},enable:function(){b(this).each(function(){var a=b(this).data("sizer");a.disabled&&(a.disabled=!1,a.$sizer.on("resize.sizer",a,g).trigger("resize.sizer"))})}};b.fn.sizer= function(a){return h[a]?h[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==typeof a&&a?this:k.apply(this,arguments)}})(jQuery);