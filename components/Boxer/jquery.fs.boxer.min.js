/* 
 * Boxer v3.0.8 - 2014-02-05 
 * A jQuery plugin for displaying images, videos or content in a modal overlay. Part of the Formstone Library. 
 * http://formstone.it/boxer/ 
 * 
 * Copyright 2014 Ben Plum; MIT Licensed 
 */ 

!function(a,b){"use strict";function c(b){return H.formatter=j,a(this).on("click.boxer",a.extend({},H,b||{}),d)}function d(c){var d=a(this),f=c.data.$object,g=d[0].attributes?d.attr("href")||"":"",i=g.toLowerCase().split("."),j=i[i.length-1],l="",m="image"===l||"jpeg"===j||"jpg"===j||"gif"===j||"png"===j||"data:image"===g.substr(0,10),o=g.indexOf("youtube.com/embed")>-1||g.indexOf("player.vimeo.com/video")>-1,p="url"===l||!m&&!o&&"http"===g.substr(0,4),w="element"===l||!m&&!o&&!p&&"#"===g.substr(0,1),x="undefined"!=typeof f;if(!(a("#boxer").length>1)&&(m||o||p||w||x)){if(C(c),F=a.extend({},{$window:a(b),$body:a("body"),$target:d,$object:f,visible:!1,resizeTimer:null,touchTimer:null,gallery:{active:!1},isMobile:G||c.data.mobile},c.data),F.margin*=2,F.containerHeight=F.height,F.containerWidth=F.width,F.type=m?"image":o?"video":"element",m||o){var y=F.$target.data("gallery")||F.$target.attr("rel");"undefined"!=typeof y&&y!==!1&&(F.gallery.active=!0,F.gallery.id=y,F.gallery.$items=a("a[data-gallery= "+F.gallery.id+"], a[rel= "+F.gallery.id+"]"),F.gallery.index=F.gallery.$items.index(F.$target),F.gallery.total=F.gallery.$items.length-1)}var z="";return F.isMobile||(z+='<div id="boxer-overlay" class="'+F.customClass+'" style="opacity: 0"></div>'),z+='<div id="boxer" class="loading '+F.customClass,F.isMobile&&(z+=" mobile"),p&&(z+=" iframe"),(w||x)&&(z+=" inline"),z+='" style="opacity: 0;',F.fixed===!0&&(z+=" position: fixed;"),z+='">',z+='<span class="boxer-close">'+F.labels.close+"</span>",z+='<div class="boxer-container" style="',z+=F.isMobile?"height: 100%; width: 100%":"height: "+F.height+"px; width: "+F.width+"px",z+='">',z+='<div class="boxer-content" style="opacity: 0;">',(m||o)&&(z+='<div class="boxer-meta">',F.gallery.active?(z+='<div class="boxer-arrow previous">'+F.labels.previous+"</div>",z+='<div class="boxer-arrow next">'+F.labels.next+"</div>",z+='<p class="boxer-position"',F.gallery.total<1&&(z+=' style="display: none;"'),z+=">",z+='<span class="current">'+(F.gallery.index+1)+"</span> "+F.labels.count+' <span class="total">'+(F.gallery.total+1)+"</span>",z+="</p>",z+='<div class="boxer-caption gallery">'):z+='<div class="boxer-caption">',z+=F.formatter.apply(F.$body,[F.$target]),z+="</div></div>"),z+="</div></div></div>",F.$body.append(z),F.$overlay=a("#boxer-overlay"),F.$boxer=a("#boxer"),F.$container=F.$boxer.find(".boxer-container"),F.$content=F.$boxer.find(".boxer-content"),F.$meta=F.$boxer.find(".boxer-meta"),F.$position=F.$boxer.find(".boxer-position"),F.$caption=F.$boxer.find(".boxer-caption"),F.$arrows=F.$boxer.find(".boxer-arrow"),F.$animatables=a("#boxer-overlay, #boxer, .boxer-container"),F.paddingVertical=parseInt(F.$boxer.css("paddingTop"),10)+parseInt(F.$boxer.css("paddingBottom"),10),F.paddingHorizontal=parseInt(F.$boxer.css("paddingLeft"),10)+parseInt(F.$boxer.css("paddingRight"),10),h(),F.gallery.active&&r(),F.$window.on("resize.boxer",I.resize).on("keydown.boxer",s),F.$body.on("touchstart.boxer click.boxer","#boxer-overlay, #boxer .boxer-close",e).on("touchmove.boxer",C),F.gallery.active&&F.$boxer.on("touchstart.boxer click.boxer",".boxer-arrow",q),F.$overlay.stop().animate({opacity:F.opacity},F.duration),F.$boxer.stop().animate({opacity:1},F.duration,function(){m?k(g):o?n(g):p?u(g):w?t(g):x?v(F.$object):a.error("BOXER: '"+g+"' is not valid.")}),x?F.$boxer:void 0}}function e(b){C(b),"undefined"!=typeof F.$animatables&&(F.$animatables.stop().animate({opacity:0},F.duration,function(){a(this).remove()}),E(F.resizeTimer),F.$window.off(".boxer"),F.$body.off(".boxer").removeClass("boxer-open"),F.gallery.active&&F.$boxer.off(".boxer"),F.isMobile&&"image"===F.type&&F.gallery.active&&F.$container.off(".boxer"),F.$window.trigger("close.boxer"),F={})}function f(){var a=i(),b=0,c=F.isMobile?0:F.duration;F.isMobile||(b=F.$arrows.outerHeight(),F.$arrows.css({marginTop:(F.contentHeight-b)/2})),!F.visible&&F.isMobile&&F.gallery.active&&F.$content.on("touchstart.boxer",".boxer-image",y),(F.isMobile||F.fixed)&&F.$body.addClass("boxer-open"),F.$boxer.stop().animate({left:a.left,top:a.top},c),F.$container.show().stop().animate({height:F.containerHeight,width:F.containerWidth},c,function(){F.$content.stop().animate({opacity:1},F.duration),F.$boxer.removeClass("loading").find(".boxer-close").stop().animate({opacity:1},F.duration),F.visible=!0,F.callback.apply(F.$boxer),F.$window.trigger("open.boxer"),F.gallery.active&&p()})}function g(a){if(a=a||!1,F.visible){var b=i(),c=0;F.isMobile||(c=F.$arrows.outerHeight(),F.$arrows.css({marginTop:(F.contentHeight-c)/2})),a?(F.$boxer.stop().animate({left:b.left,top:b.top},F.duration),F.$container.show().stop().animate({height:F.containerHeight,width:F.containerWidth})):(F.$boxer.css({left:b.left,top:b.top}),F.$container.css({height:F.containerHeight,width:F.containerWidth}))}}function h(){var a=i();F.$boxer.css({left:a.left,top:a.top})}function i(){if(F.isMobile)return{left:0,top:0};var a={left:(F.$window.width()-F.containerWidth-F.paddingHorizontal)/2,top:F.top<=0?(F.$window.height()-F.containerHeight-F.paddingVertical)/2:F.top};return F.fixed!==!0&&(a.top+=F.$window.scrollTop()),a}function j(a){var b=a.attr("title");return""!==b&&void 0!==b?'<p class="caption">'+b+"</p>":""}function k(b){F.$image=a("<img />"),F.$image.one("load.boxer",function(){var a=B(F.$image);F.naturalHeight=a.naturalHeight,F.naturalWidth=a.naturalWidth,F.retina&&(F.naturalHeight/=2,F.naturalWidth/=2),F.$content.prepend(F.$image),""===F.$caption.html()?F.$caption.hide():F.$caption.show(),l(),f()}).attr("src",b).addClass("boxer-image"),(F.$image[0].complete||4===F.$image[0].readyState)&&F.$image.trigger("load")}function l(){var a=0;for(F.windowHeight=F.viewportHeight=F.$window.height(),F.windowWidth=F.viewportWidth=F.$window.width(),F.containerHeight=1/0,F.contentHeight=0,F.containerWidth=1/0,F.contentWidth=0,F.imageMarginTop=0,F.imageMarginLeft=0;F.containerHeight>F.viewportHeight&&2>a;)F.imageHeight=0===a?F.naturalHeight:F.$image.outerHeight(),F.imageWidth=0===a?F.naturalWidth:F.$image.outerWidth(),F.metaHeight=0===a?0:F.metaHeight,0===a&&(F.ratioHorizontal=F.imageHeight/F.imageWidth,F.ratioVertical=F.imageWidth/F.imageHeight,F.isWide=F.imageWidth>F.imageHeight),F.imageHeight<F.minHeight&&(F.minHeight=F.imageHeight),F.imageWidth<F.minWidth&&(F.minWidth=F.imageWidth),F.isMobile?(F.$meta.css({width:F.windowWidth}),F.metaHeight=F.$meta.outerHeight(!0),F.contentHeight=F.viewportHeight,F.contentWidth=F.viewportWidth,F.containerHeight=F.viewportHeight-F.paddingVertical,F.containerWidth=F.viewportWidth-F.paddingHorizontal,m(),F.imageMarginTop=(F.containerHeight-F.targetImageHeight-F.metaHeight)/2,F.imageMarginLeft=(F.containerWidth-F.targetImageWidth)/2):(0===a&&(F.viewportHeight-=F.margin+F.paddingVertical,F.viewportWidth-=F.margin+F.paddingHorizontal),F.viewportHeight-=F.metaHeight,m(),F.containerHeight=F.contentHeight=F.targetImageHeight,F.containerWidth=F.contentWidth=F.targetImageWidth),F.$content.css({height:F.isMobile?F.contentHeight:"auto",width:F.contentWidth}),F.$meta.css({width:F.contentWidth}),F.$image.css({height:F.targetImageHeight,width:F.targetImageWidth,marginTop:F.imageMarginTop,marginLeft:F.imageMarginLeft}),F.isMobile||(F.metaHeight=F.$meta.outerHeight(!0),F.containerHeight+=F.metaHeight),a++}function m(){var a=F.isMobile?F.containerHeight-F.metaHeight:F.viewportHeight,b=F.isMobile?F.containerWidth:F.viewportWidth;F.isWide?(F.targetImageWidth=b,F.targetImageHeight=F.targetImageWidth*F.ratioHorizontal,F.targetImageHeight>a&&(F.targetImageHeight=a,F.targetImageWidth=F.targetImageHeight*F.ratioVertical)):(F.targetImageHeight=a,F.targetImageWidth=F.targetImageHeight*F.ratioVertical,F.targetImageWidth>b&&(F.targetImageWidth=b,F.targetImageHeight=F.targetImageWidth*F.ratioHorizontal)),(F.targetImageWidth>F.imageWidth||F.targetImageHeight>F.imageHeight)&&(F.targetImageHeight=F.imageHeight,F.targetImageWidth=F.imageWidth),(F.targetImageWidth<F.minWidth||F.targetImageHeight<F.minHeight)&&(F.targetImageWidth<F.minWidth?(F.targetImageWidth=F.minWidth,F.targetImageHeight=F.targetImageWidth*F.ratioHorizontal):(F.targetImageHeight=F.minHeight,F.targetImageWidth=F.targetImageHeight*F.ratioVertical))}function n(b){F.$videoWrapper=a('<div class="boxer-video-wrapper" />'),F.$video=a('<iframe class="boxer-video" />'),F.$video.attr("src",b).addClass("boxer-video").prependTo(F.$videoWrapper),F.$content.prepend(F.$videoWrapper),o(),f()}function o(){F.windowHeight=F.viewportHeight=F.contentHeight=F.$window.height()-F.paddingVertical,F.windowWidth=F.viewportWidth=F.contentWidth=F.$window.width()-F.paddingHorizontal,F.videoMarginTop=0,F.videoMarginLeft=0,F.isMobile?(F.$meta.css({width:F.windowWidth}),F.metaHeight=F.$meta.outerHeight(!0),F.viewportHeight-=F.metaHeight,F.targetVideoWidth=F.viewportWidth,F.targetVideoHeight=F.targetVideoWidth*F.videoRatio,F.targetVideoHeight>F.viewportHeight&&(F.targetVideoHeight=F.viewportHeight,F.targetVideoWidth=F.targetVideoHeight/F.videoRatio),F.videoMarginTop=(F.viewportHeight-F.targetVideoHeight)/2,F.videoMarginLeft=(F.viewportWidth-F.targetVideoWidth)/2):(F.viewportHeight=F.windowHeight-F.margin,F.viewportWidth=F.windowWidth-F.margin,F.targetVideoWidth=F.videoWidth>F.viewportWidth?F.viewportWidth:F.videoWidth,F.targetVideoWidth<F.minWidth&&(F.targetVideoWidth=F.minWidth),F.targetVideoHeight=F.targetVideoWidth*F.videoRatio,F.contentHeight=F.targetVideoHeight,F.contentWidth=F.targetVideoWidth),F.$content.css({height:F.isMobile?F.contentHeight:"auto",width:F.contentWidth}),F.$meta.css({width:F.contentWidth}),F.$videoWrapper.css({height:F.targetVideoHeight,width:F.targetVideoWidth,marginTop:F.videoMarginTop,marginLeft:F.videoMarginLeft}),F.isMobile||(F.metaHeight=F.$meta.outerHeight(!0),F.contentHeight=F.targetVideoHeight+F.metaHeight),F.containerHeight=F.contentHeight,F.containerWidth=F.contentWidth}function p(){var b="";F.gallery.index>0&&(b=F.gallery.$items.eq(F.gallery.index-1).attr("href"),b.indexOf("youtube.com/embed")<0&&b.indexOf("player.vimeo.com/video")<0&&a('<img src="'+b+'">')),F.gallery.index<F.gallery.total&&(b=F.gallery.$items.eq(F.gallery.index+1).attr("href"),b.indexOf("youtube.com/embed")<0&&b.indexOf("player.vimeo.com/video")<0&&a('<img src="'+b+'">'))}function q(b){C(b);var c=a(this);c.hasClass("disabled")||(F.$boxer.addClass("loading"),F.gallery.index+=c.hasClass("next")?1:-1,F.gallery.index>F.gallery.total&&(F.gallery.index=F.gallery.total),F.gallery.index<0&&(F.gallery.index=0),F.$content.stop().animate({opacity:0},F.duration,function(){"undefined"!=typeof F.$image&&F.$image.remove(),"undefined"!=typeof F.$videoWrapper&&F.$videoWrapper.remove(),F.$target=F.gallery.$items.eq(F.gallery.index),F.$caption.html(F.formatter.apply(F.$body,[F.$target])),F.$position.find(".current").html(F.gallery.index+1);var a=F.$target.attr("href"),b=a.indexOf("youtube.com/embed")>-1||a.indexOf("player.vimeo.com/video")>-1;b?n(a):k(a),r()}))}function r(){F.$arrows.removeClass("disabled"),0===F.gallery.index&&F.$arrows.filter(".previous").addClass("disabled"),F.gallery.index===F.gallery.total&&F.$arrows.filter(".next").addClass("disabled")}function s(a){!F.gallery.active||37!==a.keyCode&&39!==a.keyCode?27===a.keyCode&&F.$boxer.find(".boxer-close").trigger("click"):(C(a),F.$arrows.filter(37===a.keyCode?".previous":".next").trigger("click"))}function t(b){var c=a(b).find(">:first-child").clone();v(c)}function u(b){b+=b.indexOf("?")>-1?"&"+H.requestKey+"=true":"?"+H.requestKey+"=true";var c=a('<iframe class="boxer-iframe" src="'+b+'" />');v(c)}function v(a){F.$content.append(a),w(a),f()}function w(a){F.windowHeight=F.$window.height()-F.paddingVertical,F.windowWidth=F.$window.width()-F.paddingHorizontal,F.objectHeight=a.outerHeight(!0),F.objectWidth=a.outerWidth(!0),F.targetHeight=F.targetHeight||F.$target.data("boxer-height"),F.targetWidth=F.targetWidth||F.$target.data("boxer-width"),F.maxHeight=F.windowHeight<0?H.minHeight:F.windowHeight,F.isIframe=a.is("iframe"),F.objectMarginTop=0,F.objectMarginLeft=0,F.isMobile||(F.windowHeight-=F.margin,F.windowWidth-=F.margin),F.contentHeight=void 0!==F.targetHeight?F.targetHeight:F.isIframe?F.windowHeight:F.objectHeight,F.contentWidth=void 0!==F.targetWidth?F.targetWidth:F.isIframe?F.windowWidth:F.objectWidth,F.isIframe&&F.isMobile&&(F.contentHeight=F.windowHeight,F.contentWidth=F.windowWidth),x(F)}function x(a){a.containerHeight=a.contentHeight,a.containerWidth=a.contentWidth,a.$content.css({height:a.contentHeight,width:a.contentWidth})}function y(a){if(C(a),E(F.touchTimer),!F.isAnimating){var b="undefined"!=typeof a.originalEvent.targetTouches?a.originalEvent.targetTouches[0]:null;F.xStart=b?b.pageX:a.clientX,F.leftPosition=0,F.touchMax=1/0,F.touchMin=-1/0,F.edge=.25*F.contentWidth,0===F.gallery.index&&(F.touchMax=0),F.gallery.index===F.gallery.total&&(F.touchMin=0),F.$boxer.on("touchmove.boxer",z).one("touchend.boxer",A)}}function z(a){var b="undefined"!=typeof a.originalEvent.targetTouches?a.originalEvent.targetTouches[0]:null;F.delta=F.xStart-(b?b.pageX:a.clientX),F.delta>20&&C(a),F.canSwipe=!0;var c=-F.delta;c<F.touchMin&&(c=F.touchMin,F.canSwipe=!1),c>F.touchMax&&(c=F.touchMax,F.canSwipe=!1),F.$image.css({transform:"translate3D("+c+"px,0,0)"}),F.touchTimer=D(F.touchTimer,300,function(){A(a)})}function A(a){C(a),E(F.touchTimer),F.$boxer.off("touchmove.boxer touchend.boxer"),F.delta&&(F.$boxer.addClass("animated"),F.swipe=!1,F.canSwipe&&(F.delta>F.edge||F.delta<-F.edge)?(F.swipe=!0,F.delta<=F.leftPosition?F.$image.css({transform:"translate3D("+F.contentWidth+"px,0,0)"}):F.$image.css({transform:"translate3D("+-F.contentWidth+"px,0,0)"})):F.$image.css({transform:"translate3D(0,0,0)"}),F.swipe&&F.$arrows.filter(F.delta<=F.leftPosition?".previous":".next").trigger("click"),D(F.resetTimer,F.duration,function(){F.$boxer.removeClass("animated")}))}function B(a){var b=a[0],c=new Image;return"undefined"!=typeof b.naturalHeight?{naturalHeight:b.naturalHeight,naturalWidth:b.naturalWidth}:"img"===b.tagName.toLowerCase()?(c.src=b.src,{naturalHeight:c.height,naturalWidth:c.width}):!1}function C(a){a.preventDefault&&(a.stopPropagation(),a.preventDefault())}function D(a,b,c){return E(a),setTimeout(c,b)}function E(a){a&&(clearTimeout(a),a=null)}var F={},G=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(b.navigator.userAgent||b.navigator.vendor||b.opera),H={callback:a.noop,customClass:"",duration:250,fixed:!1,formatter:a.noop,height:100,labels:{close:"Close",count:"of",next:"Next",previous:"Previous"},margin:50,minHeight:100,minWidth:100,mobile:!1,opacity:.75,retina:!1,requestKey:"boxer",top:0,videoRatio:.5625,videoWidth:600,width:100},I={close:function(){"undefined"!=typeof F.$boxer&&(F.$boxer.off(".boxer"),F.$overlay.trigger("click"))},defaults:function(b){return H=a.extend(H,b||{}),a(this)},destroy:function(){return a(this).off(".boxer")},resize:function(b){return"undefined"!=typeof F.$boxer&&("object"!=typeof b&&(F.targetHeight=arguments[0],F.targetWidth=arguments[1]),"element"===F.type?w(F.$content.find(">:first-child")):"image"===F.type?l():"video"===F.type&&o(),g()),a(this)}};a.fn.boxer=function(a){return I[a]?I[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?this:c.apply(this,arguments)},a.boxer=function(c,e){return I[c]?I[c].apply(b,Array.prototype.slice.call(arguments,1)):c instanceof a?d.apply(b,[{data:a.extend({$object:c},H,e||{})}]):void 0}}(jQuery,window);