/* 
 * Boxer v3.2.4 - 2014-10-22 
 * A jQuery plugin for displaying images, videos or content in a modal overlay. Part of the Formstone Library. 
 * http://formstone.it/boxer/ 
 * 
 * Copyright 2014 Ben Plum; MIT Licensed 
 */

!function(a,b){"use strict";function c(b){return M.formatter=j,J=a("body"),H=G(),I=H!==!1,I||(H="transitionend.boxer"),a(this).on("click.boxer",a.extend({},M,b||{}),d)}function d(c){var d=a(this),f=c.data.$object,g=d[0].href?d[0].href||"":"",i=g.toLowerCase().split(".").pop().split(/\#|\?/),j=i[0],l=d.data("boxer-type")||"",m="image"===l||a.inArray(j,c.data.extensions)>-1||"data:image"===g.substr(0,10),o=g.indexOf("youtube.com/embed")>-1||g.indexOf("player.vimeo.com/video")>-1,p="url"===l||!m&&!o&&"http"===g.substr(0,4),w="element"===l||!m&&!o&&!p&&"#"===g.substr(0,1),x="undefined"!=typeof f;if(!(a("#boxer").length>1)&&(m||o||p||w||x)){if(D(c),K=a.extend({},{$window:a(b),$body:a("body"),$target:d,$object:f,visible:!1,resizeTimer:null,touchTimer:null,gallery:{active:!1},isMobile:L||c.data.mobile,isAnimating:!0,oldContentHeight:0,oldContentWidth:0},c.data),K.margin*=2,K.containerHeight=K.height,K.containerWidth=K.width,K.type=m?"image":o?"video":"element",m||o){var y=K.$target.data("gallery")||K.$target.attr("rel");"undefined"!=typeof y&&y!==!1&&(K.gallery.active=!0,K.gallery.id=y,K.gallery.$items=a("a[data-gallery= "+K.gallery.id+"], a[rel= "+K.gallery.id+"]"),K.gallery.index=K.gallery.$items.index(K.$target),K.gallery.total=K.gallery.$items.length-1)}var z="";return K.isMobile||(z+='<div id="boxer-overlay" class="'+K.customClass+'"></div>'),z+='<div id="boxer" class="loading animating '+K.customClass,K.isMobile&&(z+=" mobile"),p&&(z+=" iframe"),(w||x)&&(z+=" inline"),z+='"',K.fixed===!0&&(z+=' style="position: fixed;"'),z+=">",z+='<span class="boxer-close">'+K.labels.close+"</span>",z+='<span class="boxer-loading"></span>',z+='<div class="boxer-container" style="',z+=K.isMobile?"height: 100%; width: 100%":"height: "+K.height+"px; width: "+K.width+"px",z+='">',z+='<div class="boxer-content">',(m||o)&&(z+='<div class="boxer-meta">',K.gallery.active?(z+='<div class="boxer-control previous">'+K.labels.previous+"</div>",z+='<div class="boxer-control next">'+K.labels.next+"</div>",z+='<p class="boxer-position"',K.gallery.total<1&&(z+=' style="display: none;"'),z+=">",z+='<span class="current">'+(K.gallery.index+1)+"</span> "+K.labels.count+' <span class="total">'+(K.gallery.total+1)+"</span>",z+="</p>",z+='<div class="boxer-caption gallery">'):z+='<div class="boxer-caption">',z+=K.formatter.apply(K.$body,[K.$target]),z+="</div></div>"),z+="</div></div></div>",K.$body.append(z),K.$overlay=a("#boxer-overlay"),K.$boxer=a("#boxer"),K.$container=K.$boxer.find(".boxer-container"),K.$content=K.$boxer.find(".boxer-content"),K.$meta=K.$boxer.find(".boxer-meta"),K.$position=K.$boxer.find(".boxer-position"),K.$caption=K.$boxer.find(".boxer-caption"),K.$controls=K.$boxer.find(".boxer-control"),K.paddingVertical=parseInt(K.$boxer.css("paddingTop"),10)+parseInt(K.$boxer.css("paddingBottom"),10),K.paddingHorizontal=parseInt(K.$boxer.css("paddingLeft"),10)+parseInt(K.$boxer.css("paddingRight"),10),h(),K.gallery.active&&r(),K.$window.on("resize.boxer",N.resize).on("keydown.boxer",s),K.$body.on("touchstart.boxer click.boxer","#boxer-overlay, #boxer .boxer-close",e).on("touchmove.boxer",D),K.gallery.active&&K.$boxer.on("touchstart.boxer click.boxer",".boxer-control",q),K.$boxer.on(H,function(b){D(b),a(b.target).is(K.$boxer)&&(K.$boxer.off(H),m?k(g):o?n(g):p?u(g):w?t(g):x?v(K.$object):a.error("BOXER: '"+g+"' is not valid."))}),J.addClass("boxer-open"),I||K.$boxer.trigger(H),x?K.$boxer:void 0}}function e(b){D(b),"undefined"!=typeof K.$boxer&&(K.$boxer.on(H,function(b){D(b),a(b.target).is(K.$boxer)&&(K.$boxer.off(H),K.$overlay.remove(),K.$boxer.remove(),K={})}).addClass("animating"),J.removeClass("boxer-open"),I||K.$boxer.trigger(H),F(K.resizeTimer),K.$window.off("resize.boxer").off("keydown.boxer"),K.$body.off(".boxer").removeClass("boxer-open"),K.gallery.active&&K.$boxer.off(".boxer"),K.isMobile&&"image"===K.type&&K.gallery.active&&K.$container.off(".boxer"),K.$window.trigger("close.boxer"))}function f(){{var b=i(),c=0;K.isMobile?0:K.duration}K.isMobile||(c=K.$controls.outerHeight(),K.$controls.css({marginTop:(K.contentHeight-c)/2})),!K.visible&&K.isMobile&&K.gallery.active&&K.$content.on("touchstart.boxer",".boxer-image",z),(K.isMobile||K.fixed)&&K.$body.addClass("boxer-open"),K.$boxer.css({left:b.left,top:b.top}),K.$container.on(H,function(b){D(b),a(b.target).is(K.$container)&&(K.$container.off(H),K.$content.on(H,function(b){D(b),a(b.target).is(K.$content)&&(K.$content.off(H),K.$boxer.removeClass("animating"),K.isAnimating=!1)}),K.$boxer.removeClass("loading"),I||K.$content.trigger(H),K.visible=!0,K.callback.apply(K.$boxer),K.$window.trigger("open.boxer"),K.gallery.active&&p())}).css({height:K.containerHeight,width:K.containerWidth});var d=K.oldContentHeight!==K.contentHeight||K.oldContentWidth!==K.contentWidth;!K.isMobile&&I&&d||K.$container.trigger(H),K.oldContentHeight=K.contentHeight,K.oldContentWidth=K.contentWidth}function g(a){if(a=a||!1,K.visible){var b=i(),c=0;K.isMobile||(c=K.$controls.outerHeight(),K.$controls.css({marginTop:(K.contentHeight-c)/2})),K.$boxer.css({left:b.left,top:b.top}),K.$container.css({height:K.containerHeight,width:K.containerWidth})}}function h(){var a=i();K.$boxer.css({left:a.left,top:a.top})}function i(){if(K.isMobile)return{left:0,top:0};var a={left:(K.$window.width()-K.containerWidth-K.paddingHorizontal)/2,top:K.top<=0?(K.$window.height()-K.containerHeight-K.paddingVertical)/2:K.top};return K.fixed!==!0&&(a.top+=K.$window.scrollTop()),a}function j(a){var b=a.attr("title");return""!==b&&void 0!==b?'<p class="caption">'+b+"</p>":""}function k(b){K.$image=a("<img />"),K.$image.load(function(){K.$image.off("load, error");var a=C(K.$image);K.naturalHeight=a.naturalHeight,K.naturalWidth=a.naturalWidth,K.retina&&(K.naturalHeight/=2,K.naturalWidth/=2),K.$content.prepend(K.$image),""===K.$caption.html()?K.$caption.hide():K.$caption.show(),l(),f()}).error(y).attr("src",b).addClass("boxer-image"),(K.$image[0].complete||4===K.$image[0].readyState)&&K.$image.trigger("load")}function l(){var a=0;for(K.windowHeight=K.viewportHeight=K.$window.height(),K.windowWidth=K.viewportWidth=K.$window.width(),K.containerHeight=1/0,K.contentHeight=0,K.containerWidth=1/0,K.contentWidth=0,K.imageMarginTop=0,K.imageMarginLeft=0;K.containerHeight>K.viewportHeight&&2>a;)K.imageHeight=0===a?K.naturalHeight:K.$image.outerHeight(),K.imageWidth=0===a?K.naturalWidth:K.$image.outerWidth(),K.metaHeight=0===a?0:K.metaHeight,0===a&&(K.ratioHorizontal=K.imageHeight/K.imageWidth,K.ratioVertical=K.imageWidth/K.imageHeight,K.isWide=K.imageWidth>K.imageHeight),K.imageHeight<K.minHeight&&(K.minHeight=K.imageHeight),K.imageWidth<K.minWidth&&(K.minWidth=K.imageWidth),K.isMobile?(K.$meta.css({width:K.windowWidth}),K.metaHeight=K.$meta.outerHeight(!0),K.contentHeight=K.viewportHeight,K.contentWidth=K.viewportWidth,K.containerHeight=K.viewportHeight-K.paddingVertical,K.containerWidth=K.viewportWidth-K.paddingHorizontal,m(),K.imageMarginTop=(K.containerHeight-K.targetImageHeight-K.metaHeight)/2,K.imageMarginLeft=(K.containerWidth-K.targetImageWidth)/2):(0===a&&(K.viewportHeight-=K.margin+K.paddingVertical,K.viewportWidth-=K.margin+K.paddingHorizontal),K.viewportHeight-=K.metaHeight,m(),K.containerHeight=K.contentHeight=K.targetImageHeight,K.containerWidth=K.contentWidth=K.targetImageWidth),K.$content.css({height:K.isMobile?K.contentHeight:"auto",width:K.contentWidth}),K.$meta.css({width:K.contentWidth}),K.$image.css({height:K.targetImageHeight,width:K.targetImageWidth,marginTop:K.imageMarginTop,marginLeft:K.imageMarginLeft}),K.isMobile||(K.metaHeight=K.$meta.outerHeight(!0),K.containerHeight+=K.metaHeight),a++}function m(){var a=K.isMobile?K.containerHeight-K.metaHeight:K.viewportHeight,b=K.isMobile?K.containerWidth:K.viewportWidth;K.isWide?(K.targetImageWidth=b,K.targetImageHeight=K.targetImageWidth*K.ratioHorizontal,K.targetImageHeight>a&&(K.targetImageHeight=a,K.targetImageWidth=K.targetImageHeight*K.ratioVertical)):(K.targetImageHeight=a,K.targetImageWidth=K.targetImageHeight*K.ratioVertical,K.targetImageWidth>b&&(K.targetImageWidth=b,K.targetImageHeight=K.targetImageWidth*K.ratioHorizontal)),(K.targetImageWidth>K.imageWidth||K.targetImageHeight>K.imageHeight)&&(K.targetImageHeight=K.imageHeight,K.targetImageWidth=K.imageWidth),(K.targetImageWidth<K.minWidth||K.targetImageHeight<K.minHeight)&&(K.targetImageWidth<K.minWidth?(K.targetImageWidth=K.minWidth,K.targetImageHeight=K.targetImageWidth*K.ratioHorizontal):(K.targetImageHeight=K.minHeight,K.targetImageWidth=K.targetImageHeight*K.ratioVertical))}function n(b){K.$videoWrapper=a('<div class="boxer-video-wrapper" />'),K.$video=a('<iframe class="boxer-video" seamless="seamless" />'),K.$video.attr("src",b).addClass("boxer-video").prependTo(K.$videoWrapper),K.$content.prepend(K.$videoWrapper),o(),f()}function o(){K.windowHeight=K.viewportHeight=K.contentHeight=K.$window.height()-K.paddingVertical,K.windowWidth=K.viewportWidth=K.contentWidth=K.$window.width()-K.paddingHorizontal,K.videoMarginTop=0,K.videoMarginLeft=0,K.isMobile?(K.$meta.css({width:K.windowWidth}),K.metaHeight=K.$meta.outerHeight(!0),K.viewportHeight-=K.metaHeight,K.targetVideoWidth=K.viewportWidth,K.targetVideoHeight=K.targetVideoWidth*K.videoRatio,K.targetVideoHeight>K.viewportHeight&&(K.targetVideoHeight=K.viewportHeight,K.targetVideoWidth=K.targetVideoHeight/K.videoRatio),K.videoMarginTop=(K.viewportHeight-K.targetVideoHeight)/2,K.videoMarginLeft=(K.viewportWidth-K.targetVideoWidth)/2):(K.viewportHeight=K.windowHeight-K.margin,K.viewportWidth=K.windowWidth-K.margin,K.targetVideoWidth=K.videoWidth>K.viewportWidth?K.viewportWidth:K.videoWidth,K.targetVideoWidth<K.minWidth&&(K.targetVideoWidth=K.minWidth),K.targetVideoHeight=K.targetVideoWidth*K.videoRatio,K.contentHeight=K.targetVideoHeight,K.contentWidth=K.targetVideoWidth),K.$content.css({height:K.isMobile?K.contentHeight:"auto",width:K.contentWidth}),K.$meta.css({width:K.contentWidth}),K.$videoWrapper.css({height:K.targetVideoHeight,width:K.targetVideoWidth,marginTop:K.videoMarginTop,marginLeft:K.videoMarginLeft}),K.containerHeight=K.contentHeight,K.containerWidth=K.contentWidth,K.isMobile||(K.metaHeight=K.$meta.outerHeight(!0),K.containerHeight=K.targetVideoHeight+K.metaHeight)}function p(){var b="";K.gallery.index>0&&(b=K.gallery.$items.eq(K.gallery.index-1).attr("href"),b.indexOf("youtube.com/embed")<0&&b.indexOf("player.vimeo.com/video")<0&&a('<img src="'+b+'">')),K.gallery.index<K.gallery.total&&(b=K.gallery.$items.eq(K.gallery.index+1).attr("href"),b.indexOf("youtube.com/embed")<0&&b.indexOf("player.vimeo.com/video")<0&&a('<img src="'+b+'">'))}function q(b){D(b);var c=a(this);K.isAnimating||c.hasClass("disabled")||(K.isAnimating=!0,K.gallery.index+=c.hasClass("next")?1:-1,K.gallery.index>K.gallery.total&&(K.gallery.index=K.gallery.total),K.gallery.index<0&&(K.gallery.index=0),K.$content.on(H,function(b){if(D(b),a(b.target).is(K.$content)){K.$content.off(H),"undefined"!=typeof K.$image&&K.$image.remove(),"undefined"!=typeof K.$videoWrapper&&K.$videoWrapper.remove(),K.$target=K.gallery.$items.eq(K.gallery.index),K.$caption.html(K.formatter.apply(K.$body,[K.$target])),K.$position.find(".current").html(K.gallery.index+1);var c=K.$target.attr("href"),d=c.indexOf("youtube.com/embed")>-1||c.indexOf("player.vimeo.com/video")>-1;d?n(c):k(c),r()}}),K.$boxer.addClass("loading animating"),I||K.$content.trigger(H))}function r(){K.$controls.removeClass("disabled"),0===K.gallery.index&&K.$controls.filter(".previous").addClass("disabled"),K.gallery.index===K.gallery.total&&K.$controls.filter(".next").addClass("disabled")}function s(a){!K.gallery.active||37!==a.keyCode&&39!==a.keyCode?27===a.keyCode&&K.$boxer.find(".boxer-close").trigger("click"):(D(a),K.$controls.filter(37===a.keyCode?".previous":".next").trigger("click"))}function t(b){var c=a(b).find(">:first-child").clone();v(c)}function u(b){b+=b.indexOf("?")>-1?"&"+M.requestKey+"=true":"?"+M.requestKey+"=true";var c=a('<iframe class="boxer-iframe" src="'+b+'" />');v(c)}function v(a){K.$content.append(a),w(a),f()}function w(a){K.windowHeight=K.$window.height()-K.paddingVertical,K.windowWidth=K.$window.width()-K.paddingHorizontal,K.objectHeight=a.outerHeight(!0),K.objectWidth=a.outerWidth(!0),K.targetHeight=K.targetHeight||K.$target.data("boxer-height"),K.targetWidth=K.targetWidth||K.$target.data("boxer-width"),K.maxHeight=K.windowHeight<0?M.minHeight:K.windowHeight,K.isIframe=a.is("iframe"),K.objectMarginTop=0,K.objectMarginLeft=0,K.isMobile||(K.windowHeight-=K.margin,K.windowWidth-=K.margin),K.contentHeight=void 0!==K.targetHeight?K.targetHeight:K.isIframe||K.isMobile?K.windowHeight:K.objectHeight,K.contentWidth=void 0!==K.targetWidth?K.targetWidth:K.isIframe||K.isMobile?K.windowWidth:K.objectWidth,(K.isIframe||K.isObject)&&K.isMobile?(K.contentHeight=K.windowHeight,K.contentWidth=K.windowWidth):K.isObject&&(K.contentHeight=K.contentHeight>K.windowHeight?K.windowHeight:K.contentHeight,K.contentWidth=K.contentWidth>K.windowWidth?K.windowWidth:K.contentWidth),x(K)}function x(a){a.containerHeight=a.contentHeight,a.containerWidth=a.contentWidth,a.$content.css({height:a.contentHeight,width:a.contentWidth})}function y(){var b=a('<div class="boxer-error"><p>Error Loading Resource</p></div>');K.type="element",K.$meta.remove(),K.$image.off("load, error"),v(b)}function z(a){if(D(a),F(K.touchTimer),!K.isAnimating){var b="undefined"!=typeof a.originalEvent.targetTouches?a.originalEvent.targetTouches[0]:null;K.xStart=b?b.pageX:a.clientX,K.leftPosition=0,K.touchMax=1/0,K.touchMin=-1/0,K.edge=.25*K.contentWidth,0===K.gallery.index&&(K.touchMax=0),K.gallery.index===K.gallery.total&&(K.touchMin=0),K.$boxer.on("touchmove.boxer",A).one("touchend.boxer",B)}}function A(a){var b="undefined"!=typeof a.originalEvent.targetTouches?a.originalEvent.targetTouches[0]:null;K.delta=K.xStart-(b?b.pageX:a.clientX),K.delta>20&&D(a),K.canSwipe=!0;var c=-K.delta;c<K.touchMin&&(c=K.touchMin,K.canSwipe=!1),c>K.touchMax&&(c=K.touchMax,K.canSwipe=!1),K.$image.css({transform:"translate3D("+c+"px,0,0)"}),K.touchTimer=E(K.touchTimer,300,function(){B(a)})}function B(a){D(a),F(K.touchTimer),K.$boxer.off("touchmove.boxer touchend.boxer"),K.delta&&(K.$boxer.addClass("animated"),K.swipe=!1,K.canSwipe&&(K.delta>K.edge||K.delta<-K.edge)?(K.swipe=!0,K.$image.css(K.delta<=K.leftPosition?{transform:"translate3D("+K.contentWidth+"px,0,0)"}:{transform:"translate3D("+-K.contentWidth+"px,0,0)"})):K.$image.css({transform:"translate3D(0,0,0)"}),K.swipe&&K.$controls.filter(K.delta<=K.leftPosition?".previous":".next").trigger("click"),E(K.resetTimer,K.duration,function(){K.$boxer.removeClass("animated")}))}function C(a){var b=a[0],c=new Image;return"undefined"!=typeof b.naturalHeight?{naturalHeight:b.naturalHeight,naturalWidth:b.naturalWidth}:"img"===b.tagName.toLowerCase()?(c.src=b.src,{naturalHeight:c.height,naturalWidth:c.width}):!1}function D(a){a.preventDefault&&(a.stopPropagation(),a.preventDefault())}function E(a,b,c){return F(a),setTimeout(c,b)}function F(a){a&&(clearTimeout(a),a=null)}function G(){var a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},b=document.createElement("div");for(var c in a)if(a.hasOwnProperty(c)&&c in b.style)return a[c];return!1}var H,I,J=null,K={},L=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(b.navigator.userAgent||b.navigator.vendor||b.opera),M={callback:a.noop,customClass:"",extensions:["jpg","sjpg","jpeg","png","gif"],fixed:!1,formatter:a.noop,height:100,labels:{close:"Close",count:"of",next:"Next",previous:"Previous"},margin:50,minHeight:100,minWidth:100,mobile:!1,opacity:.75,retina:!1,requestKey:"boxer",top:0,videoRatio:.5625,videoWidth:600,width:100},N={close:function(){"undefined"!=typeof K.$boxer&&(K.$boxer.off(".boxer"),K.$overlay.trigger("click"))},defaults:function(b){return M=a.extend(M,b||{}),a(this)},destroy:function(){return a(this).off(".boxer")},resize:function(b){return"undefined"!=typeof K.$boxer&&("object"!=typeof b&&(K.targetHeight=arguments[0],K.targetWidth=arguments[1]),"element"===K.type?w(K.$content.find(">:first-child")):"image"===K.type?l():"video"===K.type&&o(),g()),a(this)}};a.fn.boxer=function(a){return N[a]?N[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?this:c.apply(this,arguments)},a.boxer=function(c,e){return N[c]?N[c].apply(b,Array.prototype.slice.call(arguments,1)):c instanceof a?d.apply(b,[{data:a.extend({$object:c},M,e||{})}]):void 0}}(jQuery,window);